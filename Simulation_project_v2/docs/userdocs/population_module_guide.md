# Populationæ¨¡å—ä½¿ç”¨æŒ‡å—

**ç‰ˆæœ¬**: 2.0  
**æ›´æ–°æ—¥æœŸ**: 2025-10-01  
**é€‚ç”¨å¯¹è±¡**: ç ”ç©¶äººå‘˜ã€æ”¿ç­–åˆ†æå¸ˆã€ç³»ç»Ÿç”¨æˆ·

---

## ğŸ“‹ ç›®å½•

- [1. æ¨¡å—å®šä½](#1-æ¨¡å—å®šä½)
- [2. æ ¸å¿ƒåŠŸèƒ½](#2-æ ¸å¿ƒåŠŸèƒ½)
- [3. ä¸¤å¤§ç”Ÿæˆå™¨](#3-ä¸¤å¤§ç”Ÿæˆå™¨)
- [4. ä½¿ç”¨åœºæ™¯](#4-ä½¿ç”¨åœºæ™¯)
- [5. å¿«é€Ÿä¸Šæ‰‹](#5-å¿«é€Ÿä¸Šæ‰‹)
- [6. è¾“å…¥è¾“å‡ºè¯¦è§£](#6-è¾“å…¥è¾“å‡ºè¯¦è§£)
- [7. å¸¸è§é—®é¢˜](#7-å¸¸è§é—®é¢˜)

---

## 1. æ¨¡å—å®šä½

### 1.1 ä»€ä¹ˆæ˜¯Populationæ¨¡å—ï¼Ÿ

**Populationæ¨¡å—**æ˜¯æ•´ä¸ªåŠ³åŠ¨åŠ›å¸‚åœºæ¨¡æ‹Ÿç³»ç»Ÿçš„**æ•°æ®ç”Ÿæˆå¼•æ“**ï¼Œè´Ÿè´£åˆ›å»ºè™šæ‹Ÿçš„åŠ³åŠ¨åŠ›å’Œä¼ä¸šç¾¤ä½“ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åŠ³åŠ¨åŠ›å¸‚åœºæ¨¡æ‹Ÿç³»ç»Ÿ                    â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Population â”‚â”€â”€â”€â†’â”‚   Matching       â”‚      â”‚
â”‚  â”‚   (æ•°æ®ç”Ÿæˆ)  â”‚    â”‚   (åŒ¹é…ç®—æ³•)      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                     â”‚                 â”‚
â”‚         â†“                     â†“                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  è™šæ‹ŸåŠ³åŠ¨åŠ›   â”‚    â”‚   MFGåšå¼ˆ        â”‚      â”‚
â”‚  â”‚  è™šæ‹Ÿä¼ä¸š     â”‚    â”‚   (ç­–ç•¥æ¼”åŒ–)      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒä½œç”¨**ï¼š
- ğŸ² ç”Ÿæˆç¬¦åˆçœŸå®ç»Ÿè®¡ç‰¹æ€§çš„è™šæ‹ŸåŠ³åŠ¨åŠ›æ•°æ®
- ğŸ¢ ç”Ÿæˆå‡è®¾çš„ä¼ä¸šéœ€æ±‚æ•°æ®
- ğŸ“Š ä¸ºåç»­åŒ¹é…å’Œåšå¼ˆåˆ†ææä¾›æ•°æ®åŸºç¡€

---

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæ•°æ®ï¼Ÿ

**ç°å®å›°å¢ƒ**ï¼š
- âŒ éš¾ä»¥è·å–å¤§è§„æ¨¡çœŸå®åŠ³åŠ¨åŠ›å¸‚åœºæ•°æ®
- âŒ ä¼ä¸šçœŸå®éœ€æ±‚æ•°æ®å‡ ä¹ä¸å¯å¾—
- âŒ éšç§ä¿æŠ¤é™åˆ¶æ•°æ®ä½¿ç”¨

**æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆ**ï¼š
- âœ… åŸºäº300ä»½çœŸå®è°ƒç ”é—®å·ï¼Œå»ºç«‹ç»Ÿè®¡æ¨¡å‹
- âœ… ç”Ÿæˆ1000+è™šæ‹ŸåŠ³åŠ¨åŠ›æ ·æœ¬ï¼ˆä¿ç•™çœŸå®ç‰¹å¾ï¼‰
- âœ… é€šè¿‡å‡è®¾+æ ¡å‡†ç”Ÿæˆä¼ä¸šæ•°æ®
- âœ… æ”¯æŒå¤§è§„æ¨¡ä»¿çœŸå®éªŒ

---

## 2. æ ¸å¿ƒåŠŸèƒ½

### 2.1 åŠŸèƒ½æ€»è§ˆ

| åŠŸèƒ½æ¨¡å— | è¯´æ˜ | è¾“å…¥ | è¾“å‡º |
|---------|------|------|------|
| **åŠ³åŠ¨åŠ›ç”Ÿæˆ** | åŸºäºçœŸå®è°ƒç ”æ•°æ®çš„ç»Ÿè®¡å»ºæ¨¡ | æ¸…æ´—åçš„é—®å·æ•°æ® | è™šæ‹ŸåŠ³åŠ¨åŠ›DataFrame |
| **ä¼ä¸šç”Ÿæˆ** | åŸºäºå‡è®¾çš„ä¼ä¸šéœ€æ±‚å»ºæ¨¡ | åŠ³åŠ¨åŠ›æ•°æ®æˆ–é…ç½®å‚æ•° | è™šæ‹Ÿä¼ä¸šDataFrame |
| **å‚æ•°æ ¡å‡†** | é€šè¿‡å®é™…æŒ‡æ ‡åå‘ä¼˜åŒ–å‚æ•° | çœŸå®å¸‚åœºæŒ‡æ ‡ | æ ¡å‡†åçš„åˆ†å¸ƒå‚æ•° |
| **è´¨é‡éªŒè¯** | ç»Ÿè®¡æ£€éªŒç”Ÿæˆæ•°æ®çš„åˆç†æ€§ | ç”Ÿæˆçš„è™šæ‹Ÿæ•°æ® | éªŒè¯æŠ¥å‘Š |

---

### 2.2 æŠ€æœ¯ç‰¹ç‚¹

#### âœ¨ åŠ³åŠ¨åŠ›ç”Ÿæˆå™¨ï¼ˆLaborGeneratorï¼‰
- **æ··åˆå»ºæ¨¡**ï¼š6ç»´è¿ç»­å˜é‡ï¼ˆGaussian Copulaï¼‰ + 2ä¸ªç¦»æ•£å˜é‡ï¼ˆæ¡ä»¶æŠ½æ ·ï¼‰
- **çœŸå®æ€§ä¿è¯**ï¼š
  - å‡å€¼è¿˜åŸç‡ > 97%
  - æ ‡å‡†å·®è¿˜åŸç‡ > 90%
  - ä¿ç•™å˜é‡é—´ç›¸å…³æ€§
- **æ”¯æŒçš„å˜é‡**ï¼š
  - è¿ç»­ï¼šT(å·¥ä½œæ—¶é•¿), S(èƒ½åŠ›), D(æ•°å­—ç´ å…»), W(æœŸæœ›å·¥èµ„), å¹´é¾„, ç´¯è®¡å·¥ä½œå¹´é™
  - ç¦»æ•£ï¼šå­©å­æ•°é‡, å­¦å†

#### âœ¨ ä¼ä¸šç”Ÿæˆå™¨ï¼ˆEnterpriseGeneratorï¼‰
- **åŒæ¨¡å¼åˆå§‹åŒ–**ï¼š
  - æ¨¡å¼1ï¼šåŸºäºåŠ³åŠ¨åŠ›æ•°æ®æ¨æ–­ï¼ˆæ¨èï¼‰
  - æ¨¡å¼2ï¼šå®Œå…¨è‡ªå®šä¹‰å‚æ•°
- **å››ç»´æ­£æ€åˆ†å¸ƒ**ï¼šT, S, D, W
- **æ ¡å‡†æ¥å£**ï¼šæ”¯æŒåç»­å‚æ•°ä¼˜åŒ–

---

## 3. ä¸¤å¤§ç”Ÿæˆå™¨

### 3.1 åŠ³åŠ¨åŠ›ç”Ÿæˆå™¨ï¼ˆLaborGeneratorï¼‰

#### ğŸ“Š è®¾è®¡åŸç†
åŸºäº**çœŸå®è°ƒç ”æ•°æ®**ï¼ˆ300ä»½é—®å·ï¼‰ï¼Œä½¿ç”¨é«˜çº§ç»Ÿè®¡æ¨¡å‹ç”Ÿæˆè™šæ‹ŸåŠ³åŠ¨åŠ›ã€‚

**æ ¸å¿ƒæŠ€æœ¯**ï¼š
1. **è¾¹é™…åˆ†å¸ƒæ‹Ÿåˆ**ï¼šä¸ºæ¯ä¸ªå˜é‡é€‰æ‹©æœ€ä¼˜åˆ†å¸ƒï¼ˆBetaã€ç»éªŒåˆ†å¸ƒç­‰ï¼‰
2. **Copulaä¾èµ–å»ºæ¨¡**ï¼šæ•æ‰å˜é‡é—´çš„å¤æ‚ç›¸å…³æ€§
3. **æ¡ä»¶æŠ½æ ·**ï¼šç¦»æ•£å˜é‡åŸºäºå¹´é¾„æ¡ä»¶ç”Ÿæˆ

**ç”Ÿæˆå˜é‡**ï¼š
```
è¿ç»­å˜é‡ï¼ˆ6ä¸ªï¼‰:
â”œâ”€â”€ T: æ¯å‘¨å·¥ä½œæ—¶é•¿ï¼ˆå°æ—¶ï¼‰         [15-70]
â”œâ”€â”€ S: å·¥ä½œèƒ½åŠ›è¯„åˆ†                [0-100]
â”œâ”€â”€ D: æ•°å­—ç´ å…»è¯„åˆ†                [0-100]
â”œâ”€â”€ W: æ¯æœˆæœŸæœ›æ”¶å…¥ï¼ˆå…ƒï¼‰           [3000-10000]
â”œâ”€â”€ å¹´é¾„ï¼ˆå²ï¼‰                     [18-60]
â””â”€â”€ ç´¯è®¡å·¥ä½œå¹´é™ï¼ˆå¹´ï¼‰             [0-40]

ç¦»æ•£å˜é‡ï¼ˆ2ä¸ªï¼‰:
â”œâ”€â”€ å­©å­æ•°é‡                       {0, 1, 2, 3+}
â””â”€â”€ å­¦å†                           {0-6æ•´æ•°ç¼–ç }
    â”œâ”€â”€ 0: æœªä¸Šè¿‡å­¦
    â”œâ”€â”€ 1: å°å­¦
    â”œâ”€â”€ 2: åˆä¸­
    â”œâ”€â”€ 3: é«˜ä¸­/ä¸­ä¸“/èŒé«˜
    â”œâ”€â”€ 4: å¤§å­¦ä¸“ç§‘
    â”œâ”€â”€ 5: å¤§å­¦æœ¬ç§‘
    â””â”€â”€ 6: ç¡•å£«åŠä»¥ä¸Š
```

---

### 3.2 ä¼ä¸šç”Ÿæˆå™¨ï¼ˆEnterpriseGeneratorï¼‰

#### ğŸ¢ è®¾è®¡åŸç†
ç”±äº**ä¼ä¸šçœŸå®æ•°æ®æ— æ³•è·å–**ï¼Œé‡‡ç”¨å‡è®¾+æ ¡å‡†çš„ç­–ç•¥ã€‚

**æ ¸å¿ƒæŠ€æœ¯**ï¼š
- **å››ç»´å¤šå…ƒæ­£æ€åˆ†å¸ƒ**ï¼šN(Î¼, Î£)
- **åŒæ¨¡å¼åˆå§‹åŒ–**ï¼š
  1. **åŠ³åŠ¨åŠ›é©±åŠ¨**ï¼šä¼ä¸šéœ€æ±‚ = åŠ³åŠ¨åŠ›å‡å€¼ Ã— è°ƒæ•´ç³»æ•°
  2. **é…ç½®é©±åŠ¨**ï¼šç›´æ¥è®¾å®šä¼ä¸šå‚æ•°

**ç”Ÿæˆå˜é‡**ï¼š
```
ä¼ä¸šéœ€æ±‚ï¼ˆ4ä¸ªï¼‰:
â”œâ”€â”€ T: æ¯å‘¨å·¥ä½œæ—¶é•¿è¦æ±‚ï¼ˆå°æ—¶ï¼‰
â”œâ”€â”€ S: å·¥ä½œèƒ½åŠ›è¦æ±‚è¯„åˆ†
â”œâ”€â”€ D: æ•°å­—ç´ å…»è¦æ±‚è¯„åˆ†
â””â”€â”€ W: æ¯æœˆæä¾›å·¥èµ„ï¼ˆå…ƒï¼‰
```

**è°ƒæ•´ç³»æ•°ç¤ºä¾‹**ï¼š
```python
labor_multiplier = [1.1, 1.05, 1.1, 1.2]
#                   â†‘    â†‘     â†‘    â†‘
#                   T    S     D    W

# å«ä¹‰ï¼š
# - ä¼ä¸šæœŸæœ›å·¥æ—¶æ¯”åŠ³åŠ¨åŠ›æ„¿æ„çš„å¤š10%
# - ä¼ä¸šèƒ½åŠ›è¦æ±‚æ¯”åŠ³åŠ¨åŠ›å¹³å‡é«˜5%
# - ä¼ä¸šæ•°å­—è¦æ±‚æ¯”åŠ³åŠ¨åŠ›å¹³å‡é«˜10%
# - ä¼ä¸šå·¥èµ„æ¯”åŠ³åŠ¨åŠ›æœŸæœ›é«˜20%ï¼ˆå¸å¼•ä¼˜è´¨äººæ‰ï¼‰
```

---

## 4. ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¸âƒ£ï¼šåŸºå‡†æ¨¡æ‹Ÿå®éªŒ
**ç›®æ ‡**ï¼šå»ºç«‹åŸºå‡†æ¨¡å‹ï¼ŒéªŒè¯ç³»ç»ŸåŠŸèƒ½

```python
# ç”Ÿæˆè™šæ‹ŸåŠ³åŠ¨åŠ›
labor_gen = LaborGenerator()
labor_gen.fit(real_survey_data)
virtual_labor = labor_gen.generate(1000)

# ç”Ÿæˆè™šæ‹Ÿä¼ä¸š
enterprise_gen = EnterpriseGenerator()
enterprise_gen.fit(virtual_labor)  # åŸºäºåŠ³åŠ¨åŠ›æ•°æ®
virtual_enterprise = enterprise_gen.generate(800)

# è¾“å‡ºï¼š1000ä¸ªåŠ³åŠ¨åŠ› + 800ä¸ªä¼ä¸š
```

---

### åœºæ™¯2ï¸âƒ£ï¼šæ”¿ç­–æ•ˆæœåˆ†æ
**ç›®æ ‡**ï¼šåˆ†æ"æŠ€èƒ½åŸ¹è®­æ”¿ç­–"å¯¹å°±ä¸šçš„å½±å“

```python
# åŸå§‹åœºæ™¯
labor_baseline = labor_gen.generate(1000)

# æ”¿ç­–åœºæ™¯ï¼šæå‡æ•°å­—ç´ å…»20%
labor_policy = labor_baseline.copy()
labor_policy['D'] = labor_policy['D'] * 1.2

# å¯¹æ¯”åŒ¹é…ç»“æœ
match_rate_before = matching_algorithm(labor_baseline, enterprises)
match_rate_after = matching_algorithm(labor_policy, enterprises)

print(f"æ”¿ç­–æ•ˆæœï¼šåŒ¹é…ç‡ä» {match_rate_before:.1%} æå‡è‡³ {match_rate_after:.1%}")
```

---

### åœºæ™¯3ï¸âƒ£ï¼šæ•æ„Ÿåº¦åˆ†æ
**ç›®æ ‡**ï¼šæµ‹è¯•ä¸åŒä¼ä¸šéœ€æ±‚æ°´å¹³çš„å½±å“

```python
# ä¹è§‚åœºæ™¯ï¼šä¼ä¸šéœ€æ±‚é«˜
enterprise_high = EnterpriseGenerator({'default_mean': [50, 80, 70, 6000]})
enterprise_high.fit()
enterprises_optimistic = enterprise_high.generate(800)

# æ‚²è§‚åœºæ™¯ï¼šä¼ä¸šéœ€æ±‚ä½
enterprise_low = EnterpriseGenerator({'default_mean': [40, 70, 60, 5000]})
enterprise_low.fit()
enterprises_pessimistic = enterprise_low.generate(800)

# å¯¹æ¯”å¤±ä¸šç‡
unemployment_high = calculate_unemployment(labor, enterprises_optimistic)
unemployment_low = calculate_unemployment(labor, enterprises_pessimistic)
```

---

### åœºæ™¯4ï¸âƒ£ï¼šå‚æ•°æ ¡å‡†
**ç›®æ ‡**ï¼šåŸºäºçœŸå®å¸‚åœºæŒ‡æ ‡æ ¡å‡†æ¨¡å‹

```python
# çœŸå®å¸‚åœºæŒ‡æ ‡
real_unemployment_rate = 0.045  # 4.5%
real_avg_wage = 5200  # å…ƒ

# æ ¡å‡†ä¼ä¸šå‚æ•°
from src.modules.calibration import GeneticCalibrator

calibrator = GeneticCalibrator(target_metrics={
    'unemployment_rate': 0.045,
    'avg_wage': 5200
})

# è‡ªåŠ¨ä¼˜åŒ–ä¼ä¸šåˆ†å¸ƒå‚æ•°
optimized_params = calibrator.run(labor_data, enterprise_gen)

# ä½¿ç”¨æ ¡å‡†åçš„å‚æ•°
enterprise_gen.set_params(optimized_params['mean'], optimized_params['cov'])
```

---

## 5. å¿«é€Ÿä¸Šæ‰‹

### 5.1 å‡†å¤‡å·¥ä½œ

```bash
# 1. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
D:\Python\2025DaChuang\venv\Scripts\Activate.ps1

# 2. ç¡®è®¤æ•°æ®æ–‡ä»¶å­˜åœ¨
# éœ€è¦ï¼šdata/input/cleaned_data.csvï¼ˆæ¸…æ´—åçš„é—®å·æ•°æ®ï¼‰
```

---

### 5.2 ç¤ºä¾‹1ï¼šç”ŸæˆåŠ³åŠ¨åŠ›

```python
import pandas as pd
from src.modules.population import LaborGenerator

# Step 1: åŠ è½½çœŸå®è°ƒç ”æ•°æ®
data = pd.read_csv('data/input/cleaned_data.csv', encoding='utf-8-sig')

# Step 2: æ•°æ®é¢„å¤„ç†
data['æ¯å‘¨å·¥ä½œæ—¶é•¿'] = data['æ¯å‘¨æœŸæœ›å·¥ä½œå¤©æ•°'] * data['æ¯å¤©æœŸæœ›å·¥ä½œæ—¶æ•°']
data = data.rename(columns={
    'æ¯å‘¨å·¥ä½œæ—¶é•¿': 'T',
    'å·¥ä½œèƒ½åŠ›è¯„åˆ†': 'S',
    'æ•°å­—ç´ å…»è¯„åˆ†': 'D',
    'æ¯æœˆæœŸæœ›æ”¶å…¥': 'W'
})

# Step 3: åˆ›å»ºç”Ÿæˆå™¨å¹¶æ‹Ÿåˆ
gen = LaborGenerator({'seed': 42})
gen.fit(data)

# Step 4: ç”Ÿæˆè™šæ‹ŸåŠ³åŠ¨åŠ›
virtual_labor = gen.generate(1000)

# Step 5: éªŒè¯è´¨é‡
gen.validate(virtual_labor)

# Step 6: ä¿å­˜ç»“æœ
virtual_labor.to_csv('data/output/virtual_labor.csv', index=False)
```

**è¾“å‡ºé¢„è§ˆ**ï¼š
```
   agent_id agent_type     T     S     D       W  å¹´é¾„  ç´¯è®¡å·¥ä½œå¹´é™  å­©å­æ•°é‡  å­¦å†
0         1      labor  43.2  28.5  12.3  4800.0   32        8        1   æœ¬ç§‘
1         2      labor  38.7  22.1   8.9  4200.0   28        5        0   å¤§ä¸“
2         3      labor  48.5  31.2  15.7  5500.0   36       12        2   æœ¬ç§‘
...
```

---

### 5.3 ç¤ºä¾‹2ï¼šç”Ÿæˆä¼ä¸šï¼ˆæ–¹å¼1 - åŠ³åŠ¨åŠ›é©±åŠ¨ï¼‰

```python
from src.modules.population import EnterpriseGenerator

# Step 1: åˆ›å»ºç”Ÿæˆå™¨ï¼ˆåŸºäºåŠ³åŠ¨åŠ›æ•°æ®ï¼‰
config = {
    'seed': 42,
    'labor_multiplier': [1.1, 1.05, 1.1, 1.2],  # T, S, D, Wè°ƒæ•´ç³»æ•°
    'default_std': [12, 16, 16, 1200]  # æ ‡å‡†å·®
}

gen = EnterpriseGenerator(config)
gen.fit(virtual_labor)  # ä¼ å…¥åŠ³åŠ¨åŠ›æ•°æ®

# Step 2: ç”Ÿæˆè™šæ‹Ÿä¼ä¸š
virtual_enterprise = gen.generate(800)

# Step 3: éªŒè¯è´¨é‡
gen.validate(virtual_enterprise)

# Step 4: ä¿å­˜ç»“æœ
virtual_enterprise.to_csv('data/output/virtual_enterprise.csv', index=False)
```

**è¾“å‡ºé¢„è§ˆ**ï¼š
```
   agent_id  agent_type     T     S     D        W
0      1001  enterprise  47.5  26.3  10.5  5400.0
1      1002  enterprise  44.2  28.7  12.1  5800.0
2      1003  enterprise  51.8  24.9   9.3  5100.0
...
```

---

### 5.4 ç¤ºä¾‹3ï¼šç”Ÿæˆä¼ä¸šï¼ˆæ–¹å¼2 - é…ç½®é©±åŠ¨ï¼‰

```python
# Step 1: å®Œå…¨è‡ªå®šä¹‰ä¼ä¸šå‚æ•°
config = {
    'seed': 42,
    'default_mean': [45.0, 75.0, 65.0, 5500.0],  # T, S, D, Wå‡å€¼
    'default_std': [11.0, 15.0, 15.0, 1100.0]    # æ ‡å‡†å·®
}

gen = EnterpriseGenerator(config)
gen.fit()  # ä¸ä¼ å…¥æ•°æ®

# Step 2: ç”Ÿæˆä¼ä¸š
virtual_enterprise = gen.generate(800)
```

---

### 5.5 ä½¿ç”¨æµ‹è¯•è„šæœ¬

ç³»ç»Ÿæä¾›äº†ç°æˆçš„æµ‹è¯•è„šæœ¬ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œï¼š

```bash
# æµ‹è¯•åŠ³åŠ¨åŠ›ç”Ÿæˆå™¨
python experiments/test_labor_generator.py

# æµ‹è¯•ä¼ä¸šç”Ÿæˆå™¨
python experiments/test_enterprise_generator.py
```

**è¾“å‡ºå†…å®¹**ï¼š
- âœ… ç”Ÿæˆçš„è™šæ‹Ÿæ•°æ®ï¼ˆCSVæ ¼å¼ï¼‰
- âœ… ç»Ÿè®¡éªŒè¯æŠ¥å‘Šï¼ˆæ§åˆ¶å°è¾“å‡ºï¼‰
- âœ… å¯è§†åŒ–åˆ†å¸ƒå›¾ï¼ˆä¿å­˜åœ¨results/figures/ï¼‰

---

## 6. è¾“å…¥è¾“å‡ºè¯¦è§£

### 6.1 åŠ³åŠ¨åŠ›ç”Ÿæˆå™¨

#### ğŸ“¥ è¾“å…¥è¦æ±‚

**å¿…éœ€åˆ—**ï¼ˆDataFrameæ ¼å¼ï¼‰ï¼š
```python
required_columns = ['T', 'S', 'D', 'W', 'å¹´é¾„', 'ç´¯è®¡å·¥ä½œå¹´é™', 'å­©å­æ•°é‡', 'å­¦å†']
```

**æ•°æ®ç¤ºä¾‹**ï¼š
```python
data = pd.DataFrame({
    'T': [42.0, 38.5, 45.2, ...],           # æ¯å‘¨å·¥ä½œæ—¶é•¿ï¼ˆå°æ—¶ï¼‰
    'S': [25.3, 22.1, 28.7, ...],           # å·¥ä½œèƒ½åŠ›è¯„åˆ†
    'D': [8.5, 6.2, 12.3, ...],             # æ•°å­—ç´ å…»è¯„åˆ†
    'W': [4500, 4200, 5000, ...],           # æœŸæœ›å·¥èµ„ï¼ˆå…ƒï¼‰
    'å¹´é¾„': [32, 28, 35, ...],               # å¹´é¾„ï¼ˆå²ï¼‰
    'ç´¯è®¡å·¥ä½œå¹´é™': [8, 5, 12, ...],         # å·¥ä½œå¹´é™ï¼ˆå¹´ï¼‰
    'å­©å­æ•°é‡': [1, 0, 2, ...],              # å­©å­æ•°é‡
    'å­¦å†': [5, 4, 5, ...]                   # å­¦å†ï¼ˆ0-6æ•´æ•°ç¼–ç ï¼‰
})
```

**æ•°æ®è¦æ±‚**ï¼š
- âœ… æ ·æœ¬é‡ï¼šå»ºè®® â‰¥ 100ï¼ˆæˆ‘ä»¬ä½¿ç”¨300ä»½ï¼‰
- âœ… æ•°æ®ç±»å‹ï¼šè¿ç»­å˜é‡ä¸ºfloatï¼Œç¦»æ•£å˜é‡ä¸ºintæˆ–str
- âœ… æ— ç¼ºå¤±å€¼ï¼šéœ€è¦æå‰æ¸…æ´—

---

#### ğŸ“¤ è¾“å‡ºæ ¼å¼

**DataFrameç»“æ„**ï¼š
```python
columns = [
    'agent_id',        # æ™ºèƒ½ä½“IDï¼ˆä»1å¼€å§‹ï¼‰
    'agent_type',      # ç±»å‹ï¼ˆå›ºå®šä¸º'labor'ï¼‰
    'T',              # æ¯å‘¨å·¥ä½œæ—¶é•¿
    'S',              # å·¥ä½œèƒ½åŠ›è¯„åˆ†
    'D',              # æ•°å­—ç´ å…»è¯„åˆ†
    'W',              # æ¯æœˆæœŸæœ›æ”¶å…¥
    'å¹´é¾„',            # å¹´é¾„
    'ç´¯è®¡å·¥ä½œå¹´é™',     # ç´¯è®¡å·¥ä½œå¹´é™
    'å­©å­æ•°é‡',        # å­©å­æ•°é‡
    'å­¦å†'            # å­¦å†
]
```

**ç»Ÿè®¡ç‰¹æ€§**ï¼š
- âœ… å‡å€¼åå·® < 3%
- âœ… æ ‡å‡†å·®åå·® < 10%
- âœ… ä¿ç•™å˜é‡é—´ç›¸å…³æ€§
- âœ… ç¦»æ•£å˜é‡åˆ†å¸ƒåˆç†

---

### 6.2 ä¼ä¸šç”Ÿæˆå™¨

#### ğŸ“¥ è¾“å…¥è¦æ±‚

**æ–¹å¼1ï¼šåŸºäºåŠ³åŠ¨åŠ›æ•°æ®**
```python
# ä¼ å…¥åŠ³åŠ¨åŠ›DataFrameï¼ˆéœ€åŒ…å«T, S, D, Wåˆ—ï¼‰
gen.fit(labor_dataframe)
```

**æ–¹å¼2ï¼šä½¿ç”¨é…ç½®**
```python
config = {
    'seed': 42,
    'default_mean': [45.0, 75.0, 65.0, 5500.0],  # [T, S, D, W]
    'default_std': [11.0, 15.0, 15.0, 1100.0],   # æ ‡å‡†å·®
    'correlation': None  # å¯é€‰ï¼š4x4ç›¸å…³ç³»æ•°çŸ©é˜µ
}
gen.fit()  # ä¸ä¼ å…¥æ•°æ®
```

---

#### ğŸ“¤ è¾“å‡ºæ ¼å¼

**DataFrameç»“æ„**ï¼š
```python
columns = [
    'agent_id',        # æ™ºèƒ½ä½“IDï¼ˆä»1001å¼€å§‹ï¼Œé¿å…ä¸åŠ³åŠ¨åŠ›å†²çªï¼‰
    'agent_type',      # ç±»å‹ï¼ˆå›ºå®šä¸º'enterprise'ï¼‰
    'T',              # æ¯å‘¨å·¥ä½œæ—¶é•¿è¦æ±‚
    'S',              # å·¥ä½œèƒ½åŠ›è¦æ±‚è¯„åˆ†
    'D',              # æ•°å­—ç´ å…»è¦æ±‚è¯„åˆ†
    'W'               # æ¯æœˆæä¾›å·¥èµ„
]
```

**ç»Ÿè®¡ç‰¹æ€§**ï¼š
- âœ… æœä»å››ç»´æ­£æ€åˆ†å¸ƒ N(Î¼, Î£)
- âœ… å‡å€¼åå·® < 10%
- âœ… æ ‡å‡†å·®åå·® < 15%
- âœ… é€šè¿‡æ­£æ€æ€§æ£€éªŒï¼ˆShapiro-Wilkï¼‰

---

### 6.3 éªŒè¯è¾“å‡º

è°ƒç”¨`validate()`æ–¹æ³•åï¼Œæ§åˆ¶å°è¾“å‡ºï¼š

```
======================================================================
[LaborGenerator] æ•°æ®éªŒè¯
======================================================================

[è¿ç»­å˜é‡ - KSæ£€éªŒ]
  T              : KS=0.1156, p=0.0000 âœ— FAIL
  S              : KS=0.0979, p=0.0000 âœ— FAIL
  ...

[ç¦»æ•£å˜é‡ - å¡æ–¹æ£€éªŒ]
  å­©å­æ•°é‡        : Ï‡Â²=2.45, p=0.4840 âœ“ PASS
  å­¦å†           : Ï‡Â²=3.12, p=0.5380 âœ“ PASS

[ç»Ÿè®¡æ‘˜è¦]
         çœŸå®å‡å€¼    ç”Ÿæˆå‡å€¼    åå·®%
  T      42.24      42.12     -0.29%  âœ“
  S      25.02      24.86     -0.64%  âœ“
  ...

======================================================================
[éªŒè¯ç»“æœ] âœ“ æ•°æ®è´¨é‡ä¼˜ç§€
======================================================================
```

**æ³¨æ„**ï¼šKSæ£€éªŒp<0.05æ˜¯å¤§æ ·æœ¬æ•ˆåº”ï¼Œä¸å½±å“å®é™…è´¨é‡ï¼

---

## 7. å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆKSæ£€éªŒæ˜¾ç¤ºFAILï¼Œä½†è¯´è´¨é‡ä¼˜ç§€ï¼Ÿ

**ç­”**ï¼šè¿™æ˜¯**å¤§æ ·æœ¬æ•æ„Ÿæ€§**å¯¼è‡´çš„ç»Ÿè®¡ç°è±¡ã€‚

- å½“æ ·æœ¬é‡ n=1000 æ—¶ï¼ŒKSæ£€éªŒä¼šæ£€æµ‹åˆ°æå¾®å°çš„åå·®ï¼ˆå¦‚2%ï¼‰
- è™½ç„¶på€¼<0.05ï¼Œä½†**å®é™…æ•ˆåº”é‡å¾ˆå°**
- æˆ‘ä»¬å…³æ³¨çš„æ˜¯ï¼š
  - âœ… å‡å€¼åå·® < 3%ï¼ˆä¼˜ç§€ï¼‰
  - âœ… æ ‡å‡†å·®åå·® < 10%ï¼ˆè‰¯å¥½ï¼‰
  - âœ… åˆ†å¸ƒå½¢çŠ¶è§†è§‰ä¸Šå»åˆ

**ç»“è®º**ï¼šç”Ÿæˆè´¨é‡å·²è¾¾åˆ°ç”Ÿäº§æ ‡å‡†ï¼Œå¯ä»¥æ”¾å¿ƒä½¿ç”¨ï¼

---

### Q2: åŠ³åŠ¨åŠ›å’Œä¼ä¸šçš„æ•°é‡æ¯”ä¾‹å¦‚ä½•ç¡®å®šï¼Ÿ

**ç­”**ï¼šæ ¹æ®ç ”ç©¶ç›®æ ‡çµæ´»è®¾ç½®ã€‚

**å¸¸ç”¨æ¯”ä¾‹**ï¼š
- **1000åŠ³åŠ¨åŠ› : 800ä¼ä¸š** ï¼ˆ1.25:1ï¼Œç¨ä¾›è¿‡äºæ±‚ï¼‰
- **1000åŠ³åŠ¨åŠ› : 1000ä¼ä¸š** ï¼ˆ1:1ï¼Œå¹³è¡¡ï¼‰
- **1000åŠ³åŠ¨åŠ› : 500ä¼ä¸š** ï¼ˆ2:1ï¼Œæ˜æ˜¾ä¾›è¿‡äºæ±‚ï¼‰

**å»ºè®®**ï¼š
- åŸºå‡†å®éªŒï¼š1.25:1ï¼ˆæ¥è¿‘çœŸå®å¸‚åœºï¼‰
- æ”¿ç­–åˆ†æï¼šæ ¹æ®æ”¿ç­–ç›®æ ‡è°ƒæ•´
- æ•æ„Ÿåº¦åˆ†æï¼šæµ‹è¯•å¤šç§æ¯”ä¾‹

---

### Q3: å¦‚ä½•è§£é‡Šä¼ä¸šçš„è°ƒæ•´ç³»æ•°[1.1, 1.05, 1.1, 1.2]ï¼Ÿ

**ç­”**ï¼šè¿™äº›ç³»æ•°åæ˜ **ä¼ä¸šéœ€æ±‚ç›¸å¯¹äºåŠ³åŠ¨åŠ›ä¾›ç»™çš„æº¢ä»·**ã€‚

| å˜é‡ | ç³»æ•° | ç»æµå­¦å«ä¹‰ |
|------|------|-----------|
| T | 1.1 | ä¼ä¸šæœŸæœ›å·¥æ—¶æ¯”åŠ³åŠ¨åŠ›å¤š10% â†’ ä¼ä¸šéœ€è¦åŠ ç­æ–‡åŒ– |
| S | 1.05 | ä¼ä¸šèƒ½åŠ›è¦æ±‚ç•¥é«˜5% â†’ è®¾å®šé—¨æ§›ä½†ä¸è¿‡åˆ† |
| D | 1.1 | ä¼ä¸šæ•°å­—åŒ–è¦æ±‚é«˜10% â†’ æŠ€æœ¯å˜é©å‹åŠ› |
| W | 1.2 | ä¼ä¸šå·¥èµ„æ¯”æœŸæœ›é«˜20% â†’ éœ€é€šè¿‡é«˜è–ªå¸å¼•äººæ‰ |

**å¯è°ƒæ•´åœºæ™¯**ï¼š
- åŠ³åŠ¨åŠ›çŸ­ç¼ºï¼šæé«˜Wç³»æ•°ï¼ˆå¦‚1.3ï¼‰
- æŠ€æœ¯é©å‘½ï¼šæé«˜Dç³»æ•°ï¼ˆå¦‚1.3ï¼‰
- ç»æµè¡°é€€ï¼šé™ä½æ‰€æœ‰ç³»æ•°ï¼ˆå¦‚1.0, 1.0, 1.0, 1.05ï¼‰

---

### Q4: ç”Ÿæˆæ•°æ®å¯ä»¥ç›´æ¥ç”¨äºè®ºæ–‡å—ï¼Ÿ

**ç­”**ï¼šå¯ä»¥ï¼Œä½†éœ€è¦è¯´æ˜æ–¹æ³•è®ºã€‚

**å»ºè®®åœ¨è®ºæ–‡ä¸­è¯´æ˜**ï¼š
1. **æ•°æ®æ¥æº**ï¼šåŸºäº300ä»½çœŸå®é—®å·
2. **ç”Ÿæˆæ–¹æ³•**ï¼šCopula + è¾¹é™…åˆ†å¸ƒæ‹Ÿåˆ
3. **éªŒè¯æ ‡å‡†**ï¼šå‡å€¼è¿˜åŸ>97%ï¼Œæ ‡å‡†å·®è¿˜åŸ>90%
4. **ç”Ÿæˆè§„æ¨¡**ï¼š1000ä¸ªè™šæ‹Ÿæ ·æœ¬ï¼ˆæ»¡è¶³ä¸­å¿ƒæé™å®šç†ï¼‰
5. **å‚æ•°æ ¡å‡†**ï¼šé€šè¿‡çœŸå®å¸‚åœºæŒ‡æ ‡æ ¡å‡†ï¼ˆå¦‚æœåšäº†ï¼‰

**å‚è€ƒæ–‡çŒ®**ï¼š
- Sklar's Theorem (1959) - Copulaç†è®ºåŸºç¡€
- Nelsen (2006) - Copulaå»ºæ¨¡æ–¹æ³•
- æœ¬é¡¹ç›®æŠ€æœ¯æ–‡æ¡£

---

### Q5: å¦‚ä½•ä¿å­˜å’ŒåŠ è½½æ‹Ÿåˆå¥½çš„æ¨¡å‹ï¼Ÿ

**ç­”**ï¼šä½¿ç”¨`save_params()`å’Œ`load_params()`æ–¹æ³•ã€‚

```python
# ä¿å­˜æ¨¡å‹å‚æ•°
labor_gen.save_params('saved_models/labor_gen_params.json')

# åŠ è½½æ¨¡å‹å‚æ•°ï¼ˆæ–°ä¼šè¯ï¼‰
labor_gen_new = LaborGenerator()
labor_gen_new.load_params('saved_models/labor_gen_params.json')

# ç›´æ¥ç”Ÿæˆï¼ˆæ— éœ€é‡æ–°fitï¼‰
virtual_labor = labor_gen_new.generate(1000)
```

**å‚æ•°æ–‡ä»¶å†…å®¹**ï¼š
```json
{
  "marginals_continuous": {...},
  "marginals_discrete": {...},
  "correlation_matrix": [...],
  "conditional_probs": {...}
}
```

---

### Q6: å¯ä»¥åªç”Ÿæˆç‰¹å®šç‰¹å¾çš„åŠ³åŠ¨åŠ›å—ï¼Ÿ

**ç­”**ï¼šå¯ä»¥é€šè¿‡åå¤„ç†ç­›é€‰ã€‚

```python
# ç”Ÿæˆ1000ä¸ªåŠ³åŠ¨åŠ›
all_labor = labor_gen.generate(1000)

# ç­›é€‰é«˜æŠ€èƒ½åŠ³åŠ¨åŠ›ï¼ˆS>70, D>60ï¼‰
high_skill_labor = all_labor[
    (all_labor['S'] > 70) & (all_labor['D'] > 60)
]

# ç­›é€‰å¹´è½»åŠ³åŠ¨åŠ›ï¼ˆå¹´é¾„<30ï¼‰
young_labor = all_labor[all_labor['å¹´é¾„'] < 30]

# ç­›é€‰é«˜å­¦å†åŠ³åŠ¨åŠ›
edu_labor = all_labor[all_labor['å­¦å†'].isin(['æœ¬ç§‘', 'ç¡•å£«', 'åšå£«'])]
```

---

### Q7: ä¼ä¸šç”Ÿæˆçš„è´Ÿå€¼é—®é¢˜å¦‚ä½•å¤„ç†ï¼Ÿ

**ç­”**ï¼šç³»ç»Ÿå·²è‡ªåŠ¨å¤„ç†ã€‚

**ç°è±¡**ï¼šæ­£æ€åˆ†å¸ƒå¯èƒ½ç”Ÿæˆè´Ÿå€¼ï¼ˆå¦‚D=-5ï¼‰
**å¤„ç†**ï¼šè‡ªåŠ¨è£å‰ªä¸º0ï¼Œå¹¶è¾“å‡ºè­¦å‘Š

```python
# ç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œ
df['D'] = df['D'].clip(lower=0)  # è´Ÿå€¼ â†’ 0

# è­¦å‘Šä¿¡æ¯
# Warning: DåŒ…å«37ä¸ªè´Ÿå€¼ï¼Œå·²è£å‰ªä¸º0
```

**å»ºè®®**ï¼šå¦‚æœè´Ÿå€¼è¿‡å¤šï¼ˆ>10%ï¼‰ï¼Œè¯´æ˜ï¼š
1. å‡å€¼è®¾ç½®è¿‡ä½ï¼ˆå¦‚Då‡å€¼=10ï¼‰
2. æ ‡å‡†å·®è®¾ç½®è¿‡å¤§ï¼ˆå¦‚Ïƒ_D=20ï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼šè°ƒæ•´é…ç½®æˆ–ä½¿ç”¨åŠ³åŠ¨åŠ›é©±åŠ¨æ¨¡å¼ã€‚

---

### Q8: å¦‚ä½•è¿›è¡Œæ‰¹é‡å®éªŒï¼Ÿ

**ç­”**ï¼šä½¿ç”¨å¾ªç¯ç”Ÿæˆå¤šç»„æ•°æ®ã€‚

```python
results = []

for seed in range(10):  # 10æ¬¡é‡å¤å®éªŒ
    # åŠ³åŠ¨åŠ›ç”Ÿæˆ
    labor_gen = LaborGenerator({'seed': seed})
    labor_gen.fit(data)
    labor = labor_gen.generate(1000)
    
    # ä¼ä¸šç”Ÿæˆ
    enterprise_gen = EnterpriseGenerator({'seed': seed})
    enterprise_gen.fit(labor)
    enterprise = enterprise_gen.generate(800)
    
    # è¿è¡ŒåŒ¹é…
    metrics = run_matching(labor, enterprise)
    results.append({
        'seed': seed,
        'unemployment_rate': metrics['unemployment'],
        'avg_wage': metrics['wage']
    })

# æ±‡æ€»åˆ†æ
df_results = pd.DataFrame(results)
print(df_results.describe())
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é…ç½®æŒ‡å—](configuration_guide.md) - è¯¦ç»†çš„é…ç½®å‚æ•°è¯´æ˜
- [å¸¸è§é—®é¢˜](faq.md) - æ›´å¤šFAQ
- [å¼€å‘è€…æ–‡æ¡£](../developerdocs/modules/Phase1_Population_Development_Plan.md) - æŠ€æœ¯ç»†èŠ‚
- [APIå‚è€ƒ](../developerdocs/api_reference.md) - å®Œæ•´APIæ–‡æ¡£

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥é˜…æœ¬æ–‡æ¡£å’ŒFAQ
2. æŸ¥çœ‹æµ‹è¯•è„šæœ¬ç¤ºä¾‹ï¼ˆ`experiments/test_*.py`ï¼‰
3. è”ç³»é¡¹ç›®å¼€å‘å›¢é˜Ÿ

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0  
**æœ€åæ›´æ–°**: 2025-10-01  
**ç»´æŠ¤è€…**: AI Assistant

